<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esplorando lo Spazio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F172A;
        }

        /* Stelle animate */
        @keyframes blink {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        .star {
            animation-name: blink;
            animation-timing-function: ease-in-out;
            animation-iteration-count: infinite;
            animation-direction: alternate;
            box-shadow: 0 0 2px 0.5px rgba(255, 255, 255, 0.7);
        }

        /* Animazione entrata pannelli */
        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up {
            opacity: 0;
            animation-fill-mode: forwards;
        }

        /* Accordion */
        .accordion-content {
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            overflow: hidden;
            max-height: 0;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
        }
        .accordion-content.open {
            padding-top: 1.5rem !important;
            padding-bottom: 1.5rem !important;
        }

        /* Icone menu hamburger */
        #menu-toggle-button .menu-icon { display: block; }
        #menu-toggle-button .close-icon { display: none; }
        #menu-toggle-button.open .menu-icon { display: none; }
        #menu-toggle-button.open .close-icon { display: block; }

        /* -------- LINEA DEL TEMPO -------- */

        .timeline-container {
            position: relative;
            max-width: 960px;
            margin: 0 auto;
            padding-top: 2rem;
            padding-bottom: 2rem;
        }

        .timeline-line {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 4px;
            border-radius: 9999px;
            background: linear-gradient(to bottom, #38bdf8, #6366f1, #0ea5e9);
            box-shadow: 0 0 20px rgba(59,130,246,0.7);
        }

        .timeline-item {
            position: relative;
            display: flex;
            justify-content: flex-end;
            margin: 2.5rem 0;
        }

        .timeline-item:nth-child(even) {
            justify-content: flex-start;
        }

        .timeline-dot {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 18px;
            height: 18px;
            transform: translate(-50%, -50%);
            border-radius: 9999px;
            background: #e5e7eb;
            box-shadow: 0 0 15px rgba(59,130,246,0.9);
            border: 3px solid rgba(59,130,246,0.9);
        }

        .timeline-card {
            position: relative;
            width: 45%;
            border-radius: 1rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(37,99,235,0.95), rgba(59,130,246,0.9));
            border: 1px solid rgba(129, 230, 217, 0.35);
            box-shadow: 0 10px 30px rgba(15,23,42,0.8);
            color: #e5f2ff;
        }

        .timeline-item:nth-child(odd) .timeline-card {
            margin-right: 3rem;
        }

        .timeline-item:nth-child(even) .timeline-card {
            margin-left: 3rem;
        }

        @media (max-width: 768px) {
            .timeline-line {
                left: 1.1rem;
            }
            .timeline-dot {
                left: 1.1rem;
            }
            .timeline-card {
                width: 100%;
                margin: 0 0 0 2.75rem !important;
            }
            .timeline-item {
                justify-content: flex-start;
            }
        }
    </style>
</head>

<body class="antialiased">

<div id="app" class="relative min-h-screen overflow-x-hidden">

    <!-- Sfondo spazio -->
    <div id="space-background" class="fixed inset-0 overflow-hidden -z-50">
        <div class="absolute inset-0 bg-gradient-to-b from-slate-950 via-blue-950 to-slate-900"></div>
        <div id="stars-container"></div>
        <div class="absolute inset-0 opacity-30">
            <div class="absolute top-20 left-10 w-96 h-96 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl"></div>
            <div class="absolute top-40 right-20 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl"></div>
            <div class="absolute -bottom-8 left-1/2 w-96 h-96 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl transform -translate-x-1/2"></div>
        </div>
    </div>

    <!-- MENU BURGER -->
    <div id="menu-container">
        <button
                id="menu-toggle-button"
                class="fixed top-6 left-6 z-[60] p-3 rounded-lg bg-blue-700 hover:bg-blue-600 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/50 group"
                aria-label="Apri menu"
        >
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu w-6 h-6 text-white menu-icon"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x w-6 h-6 text-white close-icon"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>

        <div
                id="menu-overlay"
                class="fixed inset-0 bg-black/40 z-40 transition-opacity duration-300 opacity-0 invisible"
        ></div>

        <div
                id="sidebar-menu"
                class="fixed left-0 top-0 h-full w-64 bg-gradient-to-b from-blue-900/90 via-slate-900/90 to-slate-950/90 backdrop-blur-md z-50 transition-transform duration-300 ease-in-out rounded-r-3xl border-r border-blue-500/30 -translate-x-full"
        >
            <div class="pt-20 px-6 pb-8 border-b border-blue-500/20">
                <h2 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-blue-100">
                    ðŸš€ Missioni
                </h2>
            </div>

            <nav class="px-4 py-6 space-y-2 overflow-y-auto max-h-[calc(100vh-200px)]" id="nav-list">
            </nav>

            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-blue-500/20 bg-gradient-to-t from-slate-950 to-transparent">
                <p class="text-xs text-blue-300 text-center">Esplora lo spazio ðŸš€</p>
            </div>
        </div>
    </div>

    <!-- Indicatore scroll -->
    <div id="scroll-indicator-container"></div>

    <div class="relative z-20">

        <!-- HERO -->
        <header class="min-h-screen flex items-center justify-center relative px-4">
            <div class="text-center">
                <div class="mb-8">
                    <div class="text-6xl md:text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 via-blue-400 to-blue-300 animate-pulse">
                        <span role="img" aria-label="Rocket">ðŸš€</span>
                    </div>
                </div>
                <h1 class="text-5xl md:text-7xl font-bold text-white mb-6 drop-shadow-lg">
                    Esplorando lo Spazio
                </h1>
                <p class="text-xl md:text-2xl text-blue-200 drop-shadow-md">
                    Scopri le meraviglie dell'universo e le agenzie aerospaziali
                </p>
            </div>
        </header>

        <!-- LINEA DEL TEMPO COSMICA -->
        <section id="timeline-section" class="relative z-20 px-4 py-20 md:py-32">
            <div class="max-w-4xl mx-auto text-center mb-12">
                <p class="text-sm uppercase tracking-[0.35em] text-blue-300 mb-3">Linea del Tempo</p>
                <h2 class="text-3xl md:text-4xl font-extrabold text-white mb-4">
                    Linea del Tempo Cosmica
                </h2>
                <p class="text-blue-200">
                    Dalla nascita dell'universo fino all'era dell'uomo.
                </p>
            </div>

            <div class="timeline-container">
                <div class="timeline-line"></div>

                <div class="timeline-item fade-in-up" style="animation-delay: 0.1s; animation-duration: 0.8s;">
                    <div class="timeline-dot"></div>
                    <div class="timeline-card">
                        <h3 class="text-lg font-bold text-white mb-1">
                            Formazione dell'Universo (Big Bang)
                        </h3>
                        <p class="text-sm text-blue-100 mb-2">13,8 miliardi di anni fa</p>
                        <p class="text-sm text-blue-100/90">
                            Nascita dello spazio, del tempo, della materia e dell'energia: l'inizio di tutto.
                        </p>
                    </div>
                </div>

                <div class="timeline-item fade-in-up" style="animation-delay: 0.2s; animation-duration: 0.8s;">
                    <div class="timeline-dot"></div>
                    <div class="timeline-card">
                        <h3 class="text-lg font-bold text-white mb-1">
                            Inizio Fusione Stellare
                        </h3>
                        <p class="text-sm text-blue-100 mb-2">Circa 13,6 miliardi di anni fa</p>
                        <p class="text-sm text-blue-100/90">
                            Le prime stelle iniziano a brillare fondendo idrogeno in elio e illuminando l'universo.
                        </p>
                    </div>
                </div>

                <div class="timeline-item fade-in-up" style="animation-delay: 0.3s; animation-duration: 0.8s;">
                    <div class="timeline-dot"></div>
                    <div class="timeline-card">
                        <h3 class="text-lg font-bold text-white mb-1">
                            Formazione della Via Lattea
                        </h3>
                        <p class="text-sm text-blue-100 mb-2">Circa 13,5 miliardi di anni fa</p>
                        <p class="text-sm text-blue-100/90">
                            Le stelle e le nubi di gas si organizzano nella nostra galassia: la Via Lattea.
                        </p>
                    </div>
                </div>

                <div class="timeline-item fade-in-up" style="animation-delay: 0.4s; animation-duration: 0.8s;">
                    <div class="timeline-dot"></div>
                    <div class="timeline-card">
                        <h3 class="text-lg font-bold text-white mb-1">
                            Nascita del Sistema Solare
                        </h3>
                        <p class="text-sm text-blue-100 mb-2">4,6 miliardi di anni fa</p>
                        <p class="text-sm text-blue-100/90">
                            Da una nube di gas e polveri si forma il nostro Sole e il disco protoplanetario che darÃ  vita ai pianeti.
                        </p>
                    </div>
                </div>

                <div class="timeline-item fade-in-up" style="animation-delay: 0.5s; animation-duration: 0.8s;">
                    <div class="timeline-dot"></div>
                    <div class="timeline-card">
                        <h3 class="text-lg font-bold text-white mb-1">
                            Formazione della Terra
                        </h3>
                        <p class="text-sm text-blue-100 mb-2">4,54 miliardi di anni fa</p>
                        <p class="text-sm text-blue-100/90">
                            La Terra si solidifica, subisce impatti violenti e si prepara ad ospitare l'acqua liquida.
                        </p>
                    </div>
                </div>

                <div class="timeline-item fade-in-up" style="animation-delay: 0.6s; animation-duration: 0.8s;">
                    <div class="timeline-dot"></div>
                    <div class="timeline-card">
                        <h3 class="text-lg font-bold text-white mb-1">
                            I Primi Organismi
                        </h3>
                        <p class="text-sm text-blue-100 mb-2">Circa 3,7 miliardi di anni fa</p>
                        <p class="text-sm text-blue-100/90">
                            Sorgono le prime forme di vita microscopiche negli oceani: batteri e archei.
                        </p>
                    </div>
                </div>

                <div class="timeline-item fade-in-up" style="animation-delay: 0.7s; animation-duration: 0.8s;">
                    <div class="timeline-dot"></div>
                    <div class="timeline-card">
                        <h3 class="text-lg font-bold text-white mb-1">
                            Oggi: L'Era dell'Uomo
                        </h3>
                        <p class="text-sm text-blue-100 mb-2">Tempo presente</p>
                        <p class="text-sm text-blue-100/90">
                            L'umanitÃ  esplora lo spazio con sonde, telescopi e missioni con equipaggio, cercando risposte alle grandi domande cosmiche.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SEZIONE AGENZIE SPAZIALI -->
        <section id="info-section" class="relative z-20 px-4 py-20 md:py-32">
            <div id="panels-container" class="max-w-3xl mx-auto space-y-6"></div>
        </section>

        <footer class="relative z-20 text-center py-12 text-blue-300">
            <p class="text-sm">Andrea Macis ðŸŒŒ</p>
        </footer>
    </div>
</div>

<script>
    // --- DATA ---
    const spaceAgencies = [
        {
            title: 'NASA',
            content: `
                <p class="mb-3">La National Aeronautics and Space Administration (NASA) Ã¨ l'agenzia spaziale civile degli Stati Uniti e leader mondiale nell'esplorazione e nella ricerca aerospaziale.</p>
                <ul class="list-disc ml-5 space-y-2 text-blue-100/90">
                    <li><strong class="text-white">Nome Completo:</strong> National Aeronautics and Space Administration.</li>
                    <li><strong class="text-white">Fondazione:</strong> 29 luglio 1958 (sotto il Presidente Eisenhower).</li>
                    <li>
                        <strong class="text-white">Loghi Principali:</strong>
                        Il "Meatball" (logo circolare, attuale) e il "Worm" (scritta stilizzata, reintrodotta di recente).
                    </li>
                    <li><strong class="text-white">Sede Centrale:</strong> Washington, D.C.</li>
                    <li><strong class="text-white">Centri Importanti:</strong> Kennedy Space Center (lanci, Florida) e Jet Propulsion Laboratory (missioni robotiche, California).</li>
                    <li>
                        <strong class="text-white">Missioni Chiave:</strong>
                        <ul class="list-circle ml-5 mt-1">
                            <li>Programma Apollo (portÃ² l'uomo sulla Luna, 1969).</li>
                            <li>Contributo alla Stazione Spaziale Internazionale (ISS).</li>
                            <li>Programma Artemis (attuale missione per riportare gli astronauti sulla Luna).</li>
                            <li>Gestione di telescopi spaziali come Hubble e James Webb.</li>
                            <li>Rover su Marte (Curiosity e Perseverance).</li>
                        </ul>
                    </li>
                    <li><strong class="text-white">CuriositÃ :</strong> Ha sviluppato tecnologie "spin-off" per l'uso quotidiano (es. memory foam).</li>
                </ul>
            `
        },
        {
            title: 'ESA',
            content: `
                <p class="mb-3">L'Agenzia Spaziale Europea (ESA) Ã¨ l'organizzazione intergovernativa che coordina l'esplorazione spaziale europea per scopi pacifici.</p>
                <ul class="list-disc ml-5 space-y-2 text-blue-100/90">
                    <li><strong class="text-white">Tipo:</strong> Organizzazione intergovernativa europea.</li>
                    <li><strong class="text-white">Fondazione:</strong> 1975.</li>
                    <li><strong class="text-white">Membri:</strong> 22 Stati membri (inclusa l'Italia).</li>
                    <li><strong class="text-white">Sede Principale:</strong> Parigi, Francia.</li>
                    <li>
                        <strong class="text-white">Punti Chiave:</strong>
                        <ul class="list-circle ml-5 mt-1">
                            <li>Coordinamento dello spazio europeo per scopi pacifici.</li>
                            <li>Sviluppa e lancia i vettori <strong class="text-blue-200">Ariane</strong> (dalla base di Kourou, Guyana Francese).</li>
                            <li>Importanti contributi a missioni scientifiche (es. telescopio James Webb) e osservazione della Terra (es. satelliti Sentinel).</li>
                            <li>Centro di Ricerca e Tecnologia (ESTEC) nei Paesi Bassi.</li>
                        </ul>
                    </li>
                </ul>
            `
        },
        {
            title: 'ROSCOSMOS',
            content: `
                <p class="mb-3">L'Agenzia Spaziale Federale Russa (Roscosmos) Ã¨ responsabile del programma spaziale russo e continua la ricca ereditÃ  spaziale sovietica.</p>
                <ul class="list-disc ml-5 space-y-2 text-blue-100/90">
                    <li><strong class="text-white">Tipo:</strong> Agenzia governativa russa.</li>
                    <li><strong class="text-white">EreditÃ :</strong> Programma spaziale sovietico (primo satellite, primo uomo nello spazio).</li>
                    <li><strong class="text-white">Base Principale:</strong> Cosmodromo di Bajkonur (Kazakistan).</li>
                    <li>
                        <strong class="text-white">Punti Chiave:</strong>
                        <ul class="list-circle ml-5 mt-1">
                            <li>Forniva il principale mezzo di trasporto per gli astronauti verso la ISS tramite le navette <strong class="text-blue-200">Sojuz</strong> per un lungo periodo.</li>
                            <li>Gestisce il sistema di navigazione satellitare <strong class="text-blue-200">GLONASS</strong>.</li>
                            <li>Piani futuri includono il proprio segmento orbitale sulla ISS e nuovi lanciatori.</li>
                        </ul>
                    </li>
                </ul>
            `
        },
        {
            title: 'CNSA',
            content: `
                <p class="mb-3">L'Amministrazione Nazionale dello Spazio della Cina (CNSA) Ã¨ l'agenzia con il programma in piÃ¹ rapida espansione, con l'obiettivo di competere con USA e Russia.</p>
                <ul class="list-disc ml-5 space-y-2 text-blue-100/90">
                    <li><strong class="text-white">Tipo:</strong> Agenzia spaziale nazionale cinese.</li>
                    <li><strong class="text-white">Fondazione:</strong> 1993.</li>
                    <li>
                        <strong class="text-white">Punti Chiave:</strong>
                        <ul class="list-circle ml-5 mt-1">
                            <li>Grande successo nell'esplorazione lunare con le missioni <strong class="text-blue-200">Chang'e</strong> (inclusi i primi atterraggi sul lato nascosto).</li>
                            <li>Ha costruito e gestisce la propria stazione spaziale, la <strong class="text-blue-200">Tiangong</strong>.</li>
                            <li>Successo nelle missioni su Marte (es. <strong class="text-blue-200">Tianwen-1</strong> con orbiter e rover Zhurong).</li>
                            <li><strong class="text-red-300">Obiettivo Dichiarato:</strong> portare astronauti sulla Luna entro il 2030.</li>
                        </ul>
                    </li>
                </ul>
            `
        },
        {
            title: 'ISRO',
            content: `
                <p class="mb-3">L'Organizzazione di Ricerca Spaziale Indiana (ISRO) Ã¨ focalizzata sullo sviluppo autonomo di tecnologie spaziali e loro applicazione per lo sviluppo nazionale.</p>
                <ul class="list-disc ml-5 space-y-2 text-blue-100/90">
                    <li><strong class="text-white">Tipo:</strong> Organizzazione di ricerca spaziale indiana.</li>
                    <li><strong class="text-white">Fondazione:</strong> 1969.</li>
                    <li><strong class="text-white">Sede Principale:</strong> Bangalore, India.</li>
                    <li>
                        <strong class="text-white">Punti Chiave:</strong>
                        <ul class="list-circle ml-5 mt-1">
                            <li>Nota per lanciare satelliti a costi contenuti per l'India e altri Paesi.</li>
                            <li>Importanti successi interplanetari, come la missione orbitale su Marte (<strong class="text-blue-200">Mangalyaan</strong>).</li>
                            <li>Allunaggio storico sulla Luna (<strong class="text-blue-200">Chandrayaan-3</strong>), che ha reso l'India il quarto Paese a riuscirci.</li>
                            <li>Sta sviluppando il programma con equipaggio umano <strong class="text-blue-200">Gaganyaan</strong>.</li>
                        </ul>
                    </li>
                </ul>
            `
        },
    ];

    // --- UTILS ---
    function createId(title) {
        return `section-${title.toLowerCase().replace(/\s/g, '-')}`;
    }

    function toggleAccordion(button) {
        const content = button.nextElementSibling;
        const icon = button.querySelector('svg:last-child');
        const isCurrentlyOpen = content.classList.contains('open');

        document.querySelectorAll('.accordion-content.open').forEach(openContent => {
            if (openContent !== content) {
                openContent.style.maxHeight = "0";
                openContent.classList.remove('open');
                openContent.previousElementSibling.querySelector('svg:last-child').classList.remove('rotate-180');
            }
        });

        if (!isCurrentlyOpen) {
            setTimeout(() => {
                content.classList.add('open');
                content.style.maxHeight = content.querySelector('div').scrollHeight + "px";
                icon.classList.add('rotate-180');
            }, 10);
        } else {
            content.style.maxHeight = "0";
            content.classList.remove('open');
            icon.classList.remove('rotate-180');
        }
    }

    function handleNavClick(title) {
        const id = createId(title);
        const element = document.getElementById(id);
        if (element) {
            const yOffset = -80;
            const y = element.getBoundingClientRect().top + window.scrollY + yOffset;
            window.scrollTo({ top: y, behavior: 'smooth' });
            closeMenu();
        }
    }

    // --- MENU LOGIC ---
    let isMenuOpen = false;

    function toggleMenu() {
        isMenuOpen = !isMenuOpen;
        updateMenuDom();
    }

    function closeMenu() {
        isMenuOpen = false;
        updateMenuDom();
    }

    function updateMenuDom() {
        const sidebar = document.getElementById('sidebar-menu');
        const overlay = document.getElementById('menu-overlay');
        const button = document.getElementById('menu-toggle-button');

        if (isMenuOpen) {
            sidebar.classList.remove('-translate-x-full');
            sidebar.classList.add('translate-x-0');
            overlay.classList.remove('opacity-0', 'invisible');
            overlay.classList.add('opacity-100', 'visible');
            button.classList.add('open');
        } else {
            sidebar.classList.remove('translate-x-0');
            sidebar.classList.add('-translate-x-full');
            overlay.classList.remove('opacity-100', 'visible');
            overlay.classList.add('opacity-0', 'invisible');
            button.classList.remove('open');
        }
    }

    // --- RENDERING ---

    function renderMenuLinks() {
        const navList = document.getElementById('nav-list');
        if (!navList) return;

        // Primo bottone: Linea del Tempo
        let linksHtml = `
            <button
                data-target="timeline-section"
                class="w-full text-left px-4 py-3 rounded-lg text-blue-100 hover:text-white hover:bg-blue-700/50 transition-all duration-200 transform hover:translate-x-2 hover:shadow-lg hover:shadow-blue-500/30 font-medium whitespace-nowrap mb-2"
                style="animation-delay: 0ms;"
            >
                <span class="inline-block mr-3 text-lg align-middle">ðŸ•’</span>
                Linea del Tempo Cosmica
            </button>
        `;

        // Poi le agenzie spaziali
        spaceAgencies.forEach((agency, index) => {
            linksHtml += `
                <button
                    data-title="${agency.title}"
                    class="w-full text-left px-4 py-3 rounded-lg text-blue-100 hover:text-white hover:bg-blue-700/50 transition-all duration-200 transform hover:translate-x-2 hover:shadow-lg hover:shadow-blue-500/30 font-medium whitespace-nowrap"
                    style="animation-delay: ${(index + 1) * 50}ms;"
                >
                    <span class="inline-block mr-3 text-lg align-middle">â†’</span>
                    ${agency.title}
                </button>
            `;
        });

        navList.innerHTML = linksHtml;

        // Listener per linea del tempo
        const timelineBtn = navList.querySelector('button[data-target="timeline-section"]');
        if (timelineBtn) {
            timelineBtn.addEventListener('click', () => {
                const element = document.getElementById('timeline-section');
                if (element) {
                    const yOffset = -80;
                    const y = element.getBoundingClientRect().top + window.scrollY + yOffset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                    closeMenu();
                }
            });
        }

        // Listener per le agenzie
        document.querySelectorAll('#nav-list button[data-title]').forEach(button => {
            button.addEventListener('click', () => {
                handleNavClick(button.dataset.title);
            });
        });

        document.getElementById('menu-toggle-button').addEventListener('click', toggleMenu);
        document.getElementById('menu-overlay').addEventListener('click', closeMenu);
    }

    function renderInformationPanels() {
        const container = document.getElementById('panels-container');
        if (!container) return;

        let panelsHtml = '';
        spaceAgencies.forEach((agency, index) => {
            const id = createId(agency.title);

            panelsHtml += `
                <div
                    class="fade-in-up"
                    id="${id}"
                    style="animation-delay: ${index * 0.1}s; animation-duration: 0.8s"
                >
                    <button
                        class="w-full relative group overflow-hidden rounded-2xl bg-gradient-to-r from-blue-700 to-blue-600 p-6 text-left transition-all duration-300 hover:from-blue-600 hover:to-blue-500 hover:shadow-lg hover:shadow-blue-500/50"
                        aria-expanded="false"
                        onclick="toggleAccordion(this)"
                    >
                        <div class="flex items-center justify-between">
                            <h3 class="text-xl font-bold text-white capitalize">${agency.title}</h3>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-6 w-6 text-white transition-transform duration-300"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </button>

                    <div class="accordion-content border-2 border-t-0 border-blue-700 bg-blue-50/10 backdrop-blur-sm">
                        <div class="p-6 pt-4">${agency.content}</div>
                    </div>
                </div>
            `;
        });
        container.innerHTML = panelsHtml;
    }

    function renderScrollIndicator() {
        const container = document.getElementById('scroll-indicator-container');
        if (!container) return;

        container.innerHTML = `
            <div class="fixed bottom-8 left-1/2 -translate-x-1/2 z-10 animate-bounce transition-opacity duration-300" id="scroll-indicator">
                <div class="flex flex-col items-center gap-2">
                    <span class="text-sm text-blue-300 font-medium">Scorri per scoprire</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-6 w-6 text-blue-400"><path d="m6 9 6 6 6-6"/></svg>
                </div>
            </div>
        `;
        const indicator = document.getElementById('scroll-indicator');
        if (indicator) {
            window.addEventListener('scroll', () => {
                indicator.style.opacity = window.scrollY < 100 ? '1' : '0';
                indicator.style.pointerEvents = window.scrollY < 100 ? 'auto' : 'none';
            });
        }
    }

    function renderSpaceBackground() {
        const starsContainer = document.getElementById('stars-container');
        const numStars = 200;
        let starsHtml = '';

        for (let i = 0; i < numStars; i++) {
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            const size = Math.random() * 2 + 0.5;
            const duration = Math.random() * 3 + 2;
            const delay = Math.random() * 2;

            starsHtml += `
                <div
                    class="star absolute rounded-full bg-white"
                    style="
                        left: ${x}%;
                        top: ${y}%;
                        width: ${size}px;
                        height: ${size}px;
                        animation-delay: ${delay}s;
                        animation-duration: ${duration}s;
                    "
                ></div>
            `;
        }
        starsContainer.innerHTML = starsHtml;
    }

    // --- INIT ---
    document.addEventListener('DOMContentLoaded', function() {
        renderSpaceBackground();
        renderInformationPanels();
        renderScrollIndicator();
        renderMenuLinks();

        setTimeout(() => {
            document.querySelectorAll('.fade-in-up').forEach((el) => {
                el.style.animationName = 'fadeInUp';
            });
        }, 100);

        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    });
</script>

</body>
</html>
